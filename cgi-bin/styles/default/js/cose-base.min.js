!function t(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i(require("layout-base")):"function"==typeof define&&define.amd?define(["layout-base"],i):"object"==typeof exports?exports.coseBase=i(require("layout-base")):e.coseBase=i(e.layoutBase)}(this,function(t){var e,i;return e={45(t,e,i){var o={};o.layoutBase=i(551),o.CoSEConstants=i(806),o.CoSEEdge=i(767),o.CoSEGraph=i(880),o.CoSEGraphManager=i(578),o.CoSELayout=i(765),o.CoSENode=i(991),o.ConstraintHandler=i(902),t.exports=o},806(t,e,i){var o=i(551).FDLayoutConstants;function n(){}for(var r in o)n[r]=o[r];n.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,n.DEFAULT_RADIAL_SEPARATION=o.DEFAULT_EDGE_LENGTH,n.DEFAULT_COMPONENT_SEPERATION=60,n.TILE=!0,n.TILING_PADDING_VERTICAL=10,n.TILING_PADDING_HORIZONTAL=10,n.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,n.ENFORCE_CONSTRAINTS=!0,n.APPLY_LAYOUT=!0,n.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,n.TREE_REDUCTION_ON_INCREMENTAL=!0,n.PURE_INCREMENTAL=n.DEFAULT_INCREMENTAL,t.exports=n},767(t,e,i){var o=i(551).FDLayoutEdge;function n(t,e,i){o.call(this,t,e,i)}for(var r in n.prototype=Object.create(o.prototype),o)n[r]=o[r];t.exports=n},880(t,e,i){var o=i(551).LGraph;function n(t,e,i){o.call(this,t,e,i)}for(var r in n.prototype=Object.create(o.prototype),o)n[r]=o[r];t.exports=n},578(t,e,i){var o=i(551).LGraphManager;function n(t){o.call(this,t)}for(var r in n.prototype=Object.create(o.prototype),o)n[r]=o[r];t.exports=n},765(t,e,i){var o=i(551).FDLayout,n=i(578),r=i(880),a=i(991),s=i(767),h=i(806),l=i(902),d=i(551).FDLayoutConstants,g=i(551).LayoutConstants,c=i(551).Point,p=i(551).PointD,f=i(551).DimensionD,u=i(551).Layout,m=i(551).Integer,v=i(551).IGeometry,$=i(551).LGraph,T=i(551).Transform,N=i(551).LinkedList;function E(){o.call(this),this.toBeTiled={},this.constraints={}}for(var y in E.prototype=Object.create(o.prototype),o)E[y]=o[y];E.prototype.newGraphManager=function(){var t=new n(this);return this.graphManager=t,t},E.prototype.newGraph=function(t){return new r(null,this.graphManager,t)},E.prototype.newNode=function(t){return new a(this.graphManager,t)},E.prototype.newEdge=function(t){return new s(null,null,t)},E.prototype.initParameters=function(){o.prototype.initParameters.call(this,arguments),this.isSubLayout||(h.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=h.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=h.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=d.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=d.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=d.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=d.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},E.prototype.initSpringEmbedder=function(){o.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/d.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},E.prototype.layout=function(){return g.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},E.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(h.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var t=new Set(this.getAllNodes()),e=this.nodesWithGravity.filter(function(e){return t.has(e)});this.graphManager.setAllNodesToApplyGravitation(e)}}else{var i=this.getFlatForest();if(i.length>0)this.positionNodesRadially(i);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var t=new Set(this.getAllNodes()),e=this.nodesWithGravity.filter(function(e){return t.has(e)});this.graphManager.setAllNodesToApplyGravitation(e),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(l.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),h.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},E.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%d.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0){if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var t=new Set(this.getAllNodes()),e=this.nodesWithGravity.filter(function(e){return t.has(e)});this.graphManager.setAllNodesToApplyGravitation(e),this.graphManager.updateBounds(),this.updateGrid(),h.PURE_INCREMENTAL?this.coolingFactor=d.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=d.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0}this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),h.PURE_INCREMENTAL?this.coolingFactor=d.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=d.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var i=!this.isTreeGrowing&&!this.isGrowthFinished,o=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(i,o),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},E.prototype.getPositionsData=function(){for(var t=this.graphManager.getAllNodes(),e={},i=0;i<t.length;i++){var o=t[i].rect,n=t[i].id;e[n]={id:n,x:o.getCenterX(),y:o.getCenterY(),w:o.width,h:o.height}}return e},E.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var t=!1;if("during"===d.ANIMATE)this.emit("layoutstarted");else{for(;!t;)t=this.tick();this.graphManager.updateBounds()}},E.prototype.moveNodes=function(){for(var t,e=this.getAllNodes(),i=0;i<e.length;i++)(t=e[i]).calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var i=0;i<e.length;i++)(t=e[i]).move()},E.prototype.initConstraintVariables=function(){var t=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var e=this.graphManager.getAllNodes(),i=0;i<e.length;i++){var o=e[i];this.idToNodeMap.set(o.id,o)}if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(e){t.fixedNodeSet.add(e.nodeId)});for(var o,e=this.graphManager.getAllNodes(),i=0;i<e.length;i++)if(null!=(o=e[i]).getChild()){var n=function e(i){for(var o,n=i.getChild().getNodes(),r=0,a=0;a<n.length;a++)null==(o=n[a]).getChild()?t.fixedNodeSet.has(o.id)&&(r+=100):r+=e(o);return r}(o);n>0&&(o.fixedNodeWeight=n)}}if(this.constraints.relativePlacementConstraint){var r=new Map,a=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(e){t.fixedNodesOnHorizontal.add(e),t.fixedNodesOnVertical.add(e)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var s=this.constraints.alignmentConstraint.vertical,i=0;i<s.length;i++)this.dummyToNodeForVerticalAlignment.set("dummy"+i,[]),s[i].forEach(function(e){r.set(e,"dummy"+i),t.dummyToNodeForVerticalAlignment.get("dummy"+i).push(e),t.fixedNodeSet.has(e)&&t.fixedNodesOnHorizontal.add("dummy"+i)});if(this.constraints.alignmentConstraint.horizontal)for(var l=this.constraints.alignmentConstraint.horizontal,i=0;i<l.length;i++)this.dummyToNodeForHorizontalAlignment.set("dummy"+i,[]),l[i].forEach(function(e){a.set(e,"dummy"+i),t.dummyToNodeForHorizontalAlignment.get("dummy"+i).push(e),t.fixedNodeSet.has(e)&&t.fixedNodesOnVertical.add("dummy"+i)})}if(h.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(t){var e,i,o;for(o=t.length-1;o>=2*t.length/3;o--)e=Math.floor(Math.random()*(o+1)),i=t[o],t[o]=t[e],t[e]=i;return t},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(e){if(e.left){var i=r.has(e.left)?r.get(e.left):e.left,o=r.has(e.right)?r.get(e.right):e.right;t.nodesInRelativeHorizontal.includes(i)||(t.nodesInRelativeHorizontal.push(i),t.nodeToRelativeConstraintMapHorizontal.set(i,[]),t.dummyToNodeForVerticalAlignment.has(i)?t.nodeToTempPositionMapHorizontal.set(i,t.idToNodeMap.get(t.dummyToNodeForVerticalAlignment.get(i)[0]).getCenterX()):t.nodeToTempPositionMapHorizontal.set(i,t.idToNodeMap.get(i).getCenterX())),t.nodesInRelativeHorizontal.includes(o)||(t.nodesInRelativeHorizontal.push(o),t.nodeToRelativeConstraintMapHorizontal.set(o,[]),t.dummyToNodeForVerticalAlignment.has(o)?t.nodeToTempPositionMapHorizontal.set(o,t.idToNodeMap.get(t.dummyToNodeForVerticalAlignment.get(o)[0]).getCenterX()):t.nodeToTempPositionMapHorizontal.set(o,t.idToNodeMap.get(o).getCenterX())),t.nodeToRelativeConstraintMapHorizontal.get(i).push({right:o,gap:e.gap}),t.nodeToRelativeConstraintMapHorizontal.get(o).push({left:i,gap:e.gap})}else{var n=a.has(e.top)?a.get(e.top):e.top,s=a.has(e.bottom)?a.get(e.bottom):e.bottom;t.nodesInRelativeVertical.includes(n)||(t.nodesInRelativeVertical.push(n),t.nodeToRelativeConstraintMapVertical.set(n,[]),t.dummyToNodeForHorizontalAlignment.has(n)?t.nodeToTempPositionMapVertical.set(n,t.idToNodeMap.get(t.dummyToNodeForHorizontalAlignment.get(n)[0]).getCenterY()):t.nodeToTempPositionMapVertical.set(n,t.idToNodeMap.get(n).getCenterY())),t.nodesInRelativeVertical.includes(s)||(t.nodesInRelativeVertical.push(s),t.nodeToRelativeConstraintMapVertical.set(s,[]),t.dummyToNodeForHorizontalAlignment.has(s)?t.nodeToTempPositionMapVertical.set(s,t.idToNodeMap.get(t.dummyToNodeForHorizontalAlignment.get(s)[0]).getCenterY()):t.nodeToTempPositionMapVertical.set(s,t.idToNodeMap.get(s).getCenterY())),t.nodeToRelativeConstraintMapVertical.get(n).push({bottom:s,gap:e.gap}),t.nodeToRelativeConstraintMapVertical.get(s).push({top:n,gap:e.gap})}});else{var d=new Map,g=new Map;this.constraints.relativePlacementConstraint.forEach(function(t){if(t.left){var e=r.has(t.left)?r.get(t.left):t.left,i=r.has(t.right)?r.get(t.right):t.right;d.has(e)?d.get(e).push(i):d.set(e,[i]),d.has(i)?d.get(i).push(e):d.set(i,[e])}else{var o=a.has(t.top)?a.get(t.top):t.top,n=a.has(t.bottom)?a.get(t.bottom):t.bottom;g.has(o)?g.get(o).push(n):g.set(o,[n]),g.has(n)?g.get(n).push(o):g.set(n,[o])}});var c=function t(e,i){var o=[],n=[],r=new N,a=new Set,s=0;return e.forEach(function(t,h){if(!a.has(h)){o[s]=[],n[s]=!1;var l=h;for(r.push(l),a.add(l),o[s].push(l);0!=r.length;)l=r.shift(),i.has(l)&&(n[s]=!0),e.get(l).forEach(function(t){a.has(t)||(r.push(t),a.add(t),o[s].push(t))});s++}}),{components:o,isFixed:n}},p=c(d,t.fixedNodesOnHorizontal);this.componentsOnHorizontal=p.components,this.fixedComponentsOnHorizontal=p.isFixed;var f=c(g,t.fixedNodesOnVertical);this.componentsOnVertical=f.components,this.fixedComponentsOnVertical=f.isFixed}}},E.prototype.updateDisplacements=function(){var t=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(e){var i=t.idToNodeMap.get(e.nodeId);i.displacementX=0,i.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var e=this.constraints.alignmentConstraint.vertical,i=0;i<e.length;i++){for(var o=0,n=0;n<e[i].length;n++){if(this.fixedNodeSet.has(e[i][n])){o=0;break}o+=this.idToNodeMap.get(e[i][n]).displacementX}for(var r=o/e[i].length,n=0;n<e[i].length;n++)this.idToNodeMap.get(e[i][n]).displacementX=r}if(this.constraints.alignmentConstraint.horizontal)for(var a=this.constraints.alignmentConstraint.horizontal,i=0;i<a.length;i++){for(var s=0,n=0;n<a[i].length;n++){if(this.fixedNodeSet.has(a[i][n])){s=0;break}s+=this.idToNodeMap.get(a[i][n]).displacementY}for(var l=s/a[i].length,n=0;n<a[i].length;n++)this.idToNodeMap.get(a[i][n]).displacementY=l}}if(this.constraints.relativePlacementConstraint){if(h.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(e){if(!t.fixedNodesOnHorizontal.has(e)){var i=0;i=t.dummyToNodeForVerticalAlignment.has(e)?t.idToNodeMap.get(t.dummyToNodeForVerticalAlignment.get(e)[0]).displacementX:t.idToNodeMap.get(e).displacementX,t.nodeToRelativeConstraintMapHorizontal.get(e).forEach(function(o){if(o.right){var n=t.nodeToTempPositionMapHorizontal.get(o.right)-t.nodeToTempPositionMapHorizontal.get(e)-i;n<o.gap&&(i-=o.gap-n)}else{var n=t.nodeToTempPositionMapHorizontal.get(e)-t.nodeToTempPositionMapHorizontal.get(o.left)+i;n<o.gap&&(i+=o.gap-n)}}),t.nodeToTempPositionMapHorizontal.set(e,t.nodeToTempPositionMapHorizontal.get(e)+i),t.dummyToNodeForVerticalAlignment.has(e)?t.dummyToNodeForVerticalAlignment.get(e).forEach(function(e){t.idToNodeMap.get(e).displacementX=i}):t.idToNodeMap.get(e).displacementX=i}}),this.nodesInRelativeVertical.forEach(function(e){if(!t.fixedNodesOnHorizontal.has(e)){var i=0;i=t.dummyToNodeForHorizontalAlignment.has(e)?t.idToNodeMap.get(t.dummyToNodeForHorizontalAlignment.get(e)[0]).displacementY:t.idToNodeMap.get(e).displacementY,t.nodeToRelativeConstraintMapVertical.get(e).forEach(function(o){if(o.bottom){var n=t.nodeToTempPositionMapVertical.get(o.bottom)-t.nodeToTempPositionMapVertical.get(e)-i;n<o.gap&&(i-=o.gap-n)}else{var n=t.nodeToTempPositionMapVertical.get(e)-t.nodeToTempPositionMapVertical.get(o.top)+i;n<o.gap&&(i+=o.gap-n)}}),t.nodeToTempPositionMapVertical.set(e,t.nodeToTempPositionMapVertical.get(e)+i),t.dummyToNodeForHorizontalAlignment.has(e)?t.dummyToNodeForHorizontalAlignment.get(e).forEach(function(e){t.idToNodeMap.get(e).displacementY=i}):t.idToNodeMap.get(e).displacementY=i}});else{for(var i=0;i<this.componentsOnHorizontal.length;i++){var d=this.componentsOnHorizontal[i];if(this.fixedComponentsOnHorizontal[i])for(var n=0;n<d.length;n++)this.dummyToNodeForVerticalAlignment.has(d[n])?this.dummyToNodeForVerticalAlignment.get(d[n]).forEach(function(e){t.idToNodeMap.get(e).displacementX=0}):this.idToNodeMap.get(d[n]).displacementX=0;else{for(var g=0,c=0,n=0;n<d.length;n++)if(this.dummyToNodeForVerticalAlignment.has(d[n])){var p=this.dummyToNodeForVerticalAlignment.get(d[n]);g+=p.length*this.idToNodeMap.get(p[0]).displacementX,c+=p.length}else g+=this.idToNodeMap.get(d[n]).displacementX,c++;for(var f=g/c,n=0;n<d.length;n++)this.dummyToNodeForVerticalAlignment.has(d[n])?this.dummyToNodeForVerticalAlignment.get(d[n]).forEach(function(e){t.idToNodeMap.get(e).displacementX=f}):this.idToNodeMap.get(d[n]).displacementX=f}}for(var i=0;i<this.componentsOnVertical.length;i++){var d=this.componentsOnVertical[i];if(this.fixedComponentsOnVertical[i])for(var n=0;n<d.length;n++)this.dummyToNodeForHorizontalAlignment.has(d[n])?this.dummyToNodeForHorizontalAlignment.get(d[n]).forEach(function(e){t.idToNodeMap.get(e).displacementY=0}):this.idToNodeMap.get(d[n]).displacementY=0;else{for(var g=0,c=0,n=0;n<d.length;n++)if(this.dummyToNodeForHorizontalAlignment.has(d[n])){var p=this.dummyToNodeForHorizontalAlignment.get(d[n]);g+=p.length*this.idToNodeMap.get(p[0]).displacementY,c+=p.length}else g+=this.idToNodeMap.get(d[n]).displacementY,c++;for(var f=g/c,n=0;n<d.length;n++)this.dummyToNodeForHorizontalAlignment.has(d[n])?this.dummyToNodeForHorizontalAlignment.get(d[n]).forEach(function(e){t.idToNodeMap.get(e).displacementY=f}):this.idToNodeMap.get(d[n]).displacementY=f}}}}},E.prototype.calculateNodesToApplyGravitationTo=function(){var t,e,i=[],o=this.graphManager.getGraphs(),n=o.length;for(e=0;e<n;e++)(t=o[e]).updateConnected(),t.isConnected||(i=i.concat(t.getNodes()));return i},E.prototype.createBendpoints=function(){var t=[];t=t.concat(this.graphManager.getAllEdges());var e=new Set;for(r=0;r<t.length;r++){var i=t[r];if(!e.has(i)){var o=i.getSource(),n=i.getTarget();if(o==n)i.getBendpoints().push(new p),i.getBendpoints().push(new p),this.createDummyNodesForBendpoints(i),e.add(i);else{var r,a,s=[];if(s=(s=s.concat(o.getEdgeListToNode(n))).concat(n.getEdgeListToNode(o)),!e.has(s[0])){if(s.length>1)for(a=0;a<s.length;a++){var h=s[a];h.getBendpoints().push(new p),this.createDummyNodesForBendpoints(h)}s.forEach(function(t){e.add(t)})}}}if(e.size==t.length)break}},E.prototype.positionNodesRadially=function(t){for(var e=new c(0,0),i=Math.ceil(Math.sqrt(t.length)),o=0,n=0,r=0,a=new p(0,0),s=0;s<t.length;s++){s%i==0&&(r=0,n=o,0!=s&&(n+=h.DEFAULT_COMPONENT_SEPERATION),o=0);var l=t[s],d=u.findCenterOfTree(l);e.x=r,e.y=n,(a=E.radialLayout(l,d,e)).y>o&&(o=Math.floor(a.y)),r=Math.floor(a.x+h.DEFAULT_COMPONENT_SEPERATION)}this.transform(new p(g.WORLD_CENTER_X-a.x/2,g.WORLD_CENTER_Y-a.y/2))},E.radialLayout=function(t,e,i){var o=Math.max(this.maxDiagonalInTree(t),h.DEFAULT_RADIAL_SEPARATION);E.branchRadialLayout(e,null,0,359,0,o);var n=$.calculateBounds(t),r=new T;r.setDeviceOrgX(n.getMinX()),r.setDeviceOrgY(n.getMinY()),r.setWorldOrgX(i.x),r.setWorldOrgY(i.y);for(var a=0;a<t.length;a++)t[a].transform(r);var s=new p(n.getMaxX(),n.getMaxY());return r.inverseTransformPoint(s)},E.branchRadialLayout=function(t,e,i,o,n,r){var a,s=(o-i+1)/2;s<0&&(s+=180);var h=(s+i)%360*v.TWO_PI/360;t.setCenter(n*Math.cos(h),n*Math.sin(h));var l=[],d=(l=l.concat(t.getEdges())).length;null!=e&&d--;for(var g=0,c=l.length,p=t.getEdgesBetween(e);p.length>1;){var f=p[0];p.splice(0,1);var u=l.indexOf(f);u>=0&&l.splice(u,1),c--,d--}a=null!=e?(l.indexOf(p[0])+1)%c:0;for(var m=Math.abs(o-i)/d,$=a;g!=d;$=++$%c){var T=l[$].getOtherEnd(t);if(T!=e){var N=(i+g*m)%360,y=(N+m)%360;E.branchRadialLayout(T,t,N,y,n+r,r),g++}}},E.maxDiagonalInTree=function(t){for(var e=m.MIN_VALUE,i=0;i<t.length;i++){var o=t[i].getDiagonal();o>e&&(e=o)}return e},E.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},E.prototype.groupZeroDegreeMembers=function(){var t=this,e={};this.memberGroups={},this.idToDummyNode={};for(var i=[],o=this.graphManager.getAllNodes(),n=0;n<o.length;n++){var r=o[n],s=r.getParent();0!==this.getNodeDegreeWithChildren(r)||void 0!=s.id&&this.getToBeTiled(s)||i.push(r)}for(var n=0;n<i.length;n++){var r=i[n],h=r.getParent().id;void 0===e[h]&&(e[h]=[]),e[h]=e[h].concat(r)}Object.keys(e).forEach(function(i){if(e[i].length>1){var o="DummyCompound_"+i;t.memberGroups[o]=e[i];var n=e[i][0].getParent(),r=new a(t.graphManager);r.id=o,r.paddingLeft=n.paddingLeft||0,r.paddingRight=n.paddingRight||0,r.paddingBottom=n.paddingBottom||0,r.paddingTop=n.paddingTop||0,t.idToDummyNode[o]=r;var s=t.getGraphManager().add(t.newGraph(),r),h=n.getChild();h.add(r);for(var l=0;l<e[i].length;l++){var d=e[i][l];h.remove(d),s.add(d)}}})},E.prototype.clearCompounds=function(){var t={},e={};this.performDFSOnCompounds();for(var i=0;i<this.compoundOrder.length;i++)e[this.compoundOrder[i].id]=this.compoundOrder[i],t[this.compoundOrder[i].id]=[].concat(this.compoundOrder[i].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[i].getChild()),this.compoundOrder[i].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(t,e)},E.prototype.clearZeroDegreeMembers=function(){var t=this,e=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(i){var o=t.idToDummyNode[i];if(e[i]=t.tileNodes(t.memberGroups[i],o.paddingLeft+o.paddingRight),o.rect.width=e[i].width,o.rect.height=e[i].height,o.setCenter(e[i].centerX,e[i].centerY),o.labelMarginLeft=0,o.labelMarginTop=0,h.NODE_DIMENSIONS_INCLUDE_LABELS){var n=o.rect.width,r=o.rect.height;o.labelWidth&&("left"==o.labelPosHorizontal?(o.rect.x-=o.labelWidth,o.setWidth(n+o.labelWidth),o.labelMarginLeft=o.labelWidth):"center"==o.labelPosHorizontal&&o.labelWidth>n?(o.rect.x-=(o.labelWidth-n)/2,o.setWidth(o.labelWidth),o.labelMarginLeft=(o.labelWidth-n)/2):"right"==o.labelPosHorizontal&&o.setWidth(n+o.labelWidth)),o.labelHeight&&("top"==o.labelPosVertical?(o.rect.y-=o.labelHeight,o.setHeight(r+o.labelHeight),o.labelMarginTop=o.labelHeight):"center"==o.labelPosVertical&&o.labelHeight>r?(o.rect.y-=(o.labelHeight-r)/2,o.setHeight(o.labelHeight),o.labelMarginTop=(o.labelHeight-r)/2):"bottom"==o.labelPosVertical&&o.setHeight(r+o.labelHeight))}})},E.prototype.repopulateCompounds=function(){for(var t=this.compoundOrder.length-1;t>=0;t--){var e=this.compoundOrder[t],i=e.id,o=e.paddingLeft,n=e.paddingTop,r=e.labelMarginLeft,a=e.labelMarginTop;this.adjustLocations(this.tiledMemberPack[i],e.rect.x,e.rect.y,o,n,r,a)}},E.prototype.repopulateZeroDegreeMembers=function(){var t=this,e=this.tiledZeroDegreePack;Object.keys(e).forEach(function(i){var o=t.idToDummyNode[i],n=o.paddingLeft,r=o.paddingTop,a=o.labelMarginLeft,s=o.labelMarginTop;t.adjustLocations(e[i],o.rect.x,o.rect.y,n,r,a,s)})},E.prototype.getToBeTiled=function(t){var e=t.id;if(null!=this.toBeTiled[e])return this.toBeTiled[e];var i=t.getChild();if(null==i)return this.toBeTiled[e]=!1,!1;for(var o=i.getNodes(),n=0;n<o.length;n++){var r=o[n];if(this.getNodeDegree(r)>0)return this.toBeTiled[e]=!1,!1;if(null==r.getChild()){this.toBeTiled[r.id]=!1;continue}if(!this.getToBeTiled(r))return this.toBeTiled[e]=!1,!1}return this.toBeTiled[e]=!0,!0},E.prototype.getNodeDegree=function(t){t.id;for(var e=t.getEdges(),i=0,o=0;o<e.length;o++){var n=e[o];n.getSource().id!==n.getTarget().id&&(i+=1)}return i},E.prototype.getNodeDegreeWithChildren=function(t){var e=this.getNodeDegree(t);if(null==t.getChild())return e;for(var i=t.getChild().getNodes(),o=0;o<i.length;o++){var n=i[o];e+=this.getNodeDegreeWithChildren(n)}return e},E.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},E.prototype.fillCompexOrderByDFS=function(t){for(var e=0;e<t.length;e++){var i=t[e];null!=i.getChild()&&this.fillCompexOrderByDFS(i.getChild().getNodes()),this.getToBeTiled(i)&&this.compoundOrder.push(i)}},E.prototype.adjustLocations=function(t,e,i,o,n,r,a){e+=o+r,i+=n+a;for(var s=e,h=0;h<t.rows.length;h++){var l=t.rows[h];e=s;for(var d=0,g=0;g<l.length;g++){var c=l[g];c.rect.x=e,c.rect.y=i,e+=c.rect.width+t.horizontalPadding,c.rect.height>d&&(d=c.rect.height)}i+=d+t.verticalPadding}},E.prototype.tileCompoundMembers=function(t,e){var i=this;this.tiledMemberPack=[],Object.keys(t).forEach(function(o){var n=e[o];if(i.tiledMemberPack[o]=i.tileNodes(t[o],n.paddingLeft+n.paddingRight),n.rect.width=i.tiledMemberPack[o].width,n.rect.height=i.tiledMemberPack[o].height,n.setCenter(i.tiledMemberPack[o].centerX,i.tiledMemberPack[o].centerY),n.labelMarginLeft=0,n.labelMarginTop=0,h.NODE_DIMENSIONS_INCLUDE_LABELS){var r=n.rect.width,a=n.rect.height;n.labelWidth&&("left"==n.labelPosHorizontal?(n.rect.x-=n.labelWidth,n.setWidth(r+n.labelWidth),n.labelMarginLeft=n.labelWidth):"center"==n.labelPosHorizontal&&n.labelWidth>r?(n.rect.x-=(n.labelWidth-r)/2,n.setWidth(n.labelWidth),n.labelMarginLeft=(n.labelWidth-r)/2):"right"==n.labelPosHorizontal&&n.setWidth(r+n.labelWidth)),n.labelHeight&&("top"==n.labelPosVertical?(n.rect.y-=n.labelHeight,n.setHeight(a+n.labelHeight),n.labelMarginTop=n.labelHeight):"center"==n.labelPosVertical&&n.labelHeight>a?(n.rect.y-=(n.labelHeight-a)/2,n.setHeight(n.labelHeight),n.labelMarginTop=(n.labelHeight-a)/2):"bottom"==n.labelPosVertical&&n.setHeight(a+n.labelHeight))}})},E.prototype.tileNodes=function(t,e){var i,o=this.tileNodesByFavoringDim(t,e,!0),n=this.tileNodesByFavoringDim(t,e,!1),r=this.getOrgRatio(o);return this.getOrgRatio(n)<r?n:o},E.prototype.getOrgRatio=function(t){var e,i=t.width/t.height;return i<1&&(i=1/i),i},E.prototype.calcIdealRowWidth=function(t,e){var i,o=h.TILING_PADDING_VERTICAL,n=h.TILING_PADDING_HORIZONTAL,r=t.length,a=0,s=0,l=0;t.forEach(function(t){a+=t.getWidth(),s+=t.getHeight(),t.getWidth()>l&&(l=t.getWidth())});var d,g=a/r,c=(n-o+Math.sqrt(Math.pow(o-n,2)+4*(g+n)*(s/r+o)*r))/(2*(g+n));e?(i=Math.ceil(c))==c&&i++:i=Math.floor(c);var p=i*(g+n)-n;return l>p&&(p=l),p+=2*n},E.prototype.tileNodesByFavoringDim=function(t,e,i){var o=h.TILING_PADDING_VERTICAL,n=h.TILING_PADDING_HORIZONTAL,r=h.TILING_COMPARE_BY,a={rows:[],rowWidth:[],rowHeight:[],width:0,height:e,verticalPadding:o,horizontalPadding:n,centerX:0,centerY:0};r&&(a.idealRowWidth=this.calcIdealRowWidth(t,i));var s=function t(e){return e.rect.width*e.rect.height},l=function t(e,i){return s(i)-s(e)};t.sort(function(t,e){var i=l;return a.idealRowWidth?(i=r)(t.id,e.id):i(t,e)});for(var d=0,g=0,c=0;c<t.length;c++){var p=t[c];d+=p.getCenterX(),g+=p.getCenterY()}a.centerX=d/t.length,a.centerY=g/t.length;for(var c=0;c<t.length;c++){var p=t[c];if(0==a.rows.length)this.insertNodeToRow(a,p,0,e);else if(this.canAddHorizontal(a,p.rect.width,p.rect.height)){var f=a.rows.length-1;a.idealRowWidth||(f=this.getShortestRowIndex(a)),this.insertNodeToRow(a,p,f,e)}else this.insertNodeToRow(a,p,a.rows.length,e);this.shiftToLastRow(a)}return a},E.prototype.insertNodeToRow=function(t,e,i,o){i==t.rows.length&&(t.rows.push([]),t.rowWidth.push(o),t.rowHeight.push(0));var n=t.rowWidth[i]+e.rect.width;t.rows[i].length>0&&(n+=t.horizontalPadding),t.rowWidth[i]=n,t.width<n&&(t.width=n);var r=e.rect.height;i>0&&(r+=t.verticalPadding);var a=0;r>t.rowHeight[i]&&(a=t.rowHeight[i],t.rowHeight[i]=r,a=t.rowHeight[i]-a),t.height+=a,t.rows[i].push(e)},E.prototype.getShortestRowIndex=function(t){for(var e=-1,i=Number.MAX_VALUE,o=0;o<t.rows.length;o++)t.rowWidth[o]<i&&(e=o,i=t.rowWidth[o]);return e},E.prototype.getLongestRowIndex=function(t){for(var e=-1,i=Number.MIN_VALUE,o=0;o<t.rows.length;o++)t.rowWidth[o]>i&&(e=o,i=t.rowWidth[o]);return e},E.prototype.canAddHorizontal=function(t,e,i){if(t.idealRowWidth){var o,n,r=t.rows.length-1;return t.rowWidth[r]+e+t.horizontalPadding<=t.idealRowWidth}var a=this.getShortestRowIndex(t);if(a<0)return!0;var s=t.rowWidth[a];if(s+t.horizontalPadding+e<=t.width)return!0;var h=0;return t.rowHeight[a]<i&&a>0&&(h=i+t.verticalPadding-t.rowHeight[a]),o=t.width-s>=e+t.horizontalPadding?(t.height+h)/(s+e+t.horizontalPadding):(t.height+h)/t.width,h=i+t.verticalPadding,(n=t.width<e?(t.height+h)/e:(t.height+h)/t.width)<1&&(n=1/n),o<1&&(o=1/o),o<n},E.prototype.shiftToLastRow=function(t){var e=this.getLongestRowIndex(t),i=t.rowWidth.length-1,o=t.rows[e],n=o[o.length-1],r=n.width+t.horizontalPadding;if(t.width-t.rowWidth[i]>r&&e!=i){o.splice(-1,1),t.rows[i].push(n),t.rowWidth[e]=t.rowWidth[e]-r,t.rowWidth[i]=t.rowWidth[i]+r,t.width=t.rowWidth[instance.getLongestRowIndex(t)];for(var a=Number.MIN_VALUE,s=0;s<o.length;s++)o[s].height>a&&(a=o[s].height);e>0&&(a+=t.verticalPadding);var h=t.rowHeight[e]+t.rowHeight[i];t.rowHeight[e]=a,t.rowHeight[i]<n.height+t.verticalPadding&&(t.rowHeight[i]=n.height+t.verticalPadding);var l=t.rowHeight[e]+t.rowHeight[i];t.height+=l-h,this.shiftToLastRow(t)}},E.prototype.tilingPreLayout=function(){h.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},E.prototype.tilingPostLayout=function(){h.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},E.prototype.reduceTrees=function(){for(var t,e=[],i=!0;i;){var o=this.graphManager.getAllNodes(),n=[];i=!1;for(var r=0;r<o.length;r++)if(1==(t=o[r]).getEdges().length&&!t.getEdges()[0].isInterGraph&&null==t.getChild()){if(h.PURE_INCREMENTAL){var a=t.getEdges()[0].getOtherEnd(t),s=new f(t.getCenterX()-a.getCenterX(),t.getCenterY()-a.getCenterY());n.push([t,t.getEdges()[0],t.getOwner(),s])}else n.push([t,t.getEdges()[0],t.getOwner()]);i=!0}if(!0==i){for(var l=[],d=0;d<n.length;d++)1==n[d][0].getEdges().length&&(l.push(n[d]),n[d][0].getOwner().remove(n[d][0]));e.push(l),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=e},E.prototype.growTree=function(t){for(var e,i=t[t.length-1],o=0;o<i.length;o++)e=i[o],this.findPlaceforPrunedNode(e),e[2].add(e[0]),e[2].add(e[1],e[1].source,e[1].target);t.splice(t.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},E.prototype.findPlaceforPrunedNode=function(t){var e=t[0];if(o=e==t[1].source?t[1].target:t[1].source,h.PURE_INCREMENTAL)e.setCenter(o.getCenterX()+t[3].getWidth(),o.getCenterY()+t[3].getHeight());else{var i,o,n,r,a=o.startX,s=o.finishX,l=o.startY,g=o.finishY,c=[0,0,0,0];if(l>0)for(var p=a;p<=s;p++)c[0]+=this.grid[p][l-1].length+this.grid[p][l].length-1;if(s<this.grid.length-1)for(var p=l;p<=g;p++)c[1]+=this.grid[s+1][p].length+this.grid[s][p].length-1;if(g<this.grid[0].length-1)for(var p=a;p<=s;p++)c[2]+=this.grid[p][g+1].length+this.grid[p][g].length-1;if(a>0)for(var p=l;p<=g;p++)c[3]+=this.grid[a-1][p].length+this.grid[a][p].length-1;for(var f=m.MAX_VALUE,u=0;u<c.length;u++)c[u]<f?(f=c[u],n=1,r=u):c[u]==f&&n++;if(3==n&&0==f)0==c[0]&&0==c[1]&&0==c[2]?i=1:0==c[0]&&0==c[1]&&0==c[3]?i=0:0==c[0]&&0==c[2]&&0==c[3]?i=3:0==c[1]&&0==c[2]&&0==c[3]&&(i=2);else if(2==n&&0==f){var v=Math.floor(2*Math.random());i=0==c[0]&&0==c[1]?0==v?0:1:0==c[0]&&0==c[2]?0==v?0:2:0==c[0]&&0==c[3]?0==v?0:3:0==c[1]&&0==c[2]?0==v?1:2:0==c[1]&&0==c[3]?0==v?1:3:0==v?2:3}else if(4==n&&0==f){var v=Math.floor(4*Math.random());i=v}else i=r;0==i?e.setCenter(o.getCenterX(),o.getCenterY()-o.getHeight()/2-d.DEFAULT_EDGE_LENGTH-e.getHeight()/2):1==i?e.setCenter(o.getCenterX()+o.getWidth()/2+d.DEFAULT_EDGE_LENGTH+e.getWidth()/2,o.getCenterY()):2==i?e.setCenter(o.getCenterX(),o.getCenterY()+o.getHeight()/2+d.DEFAULT_EDGE_LENGTH+e.getHeight()/2):e.setCenter(o.getCenterX()-o.getWidth()/2-d.DEFAULT_EDGE_LENGTH-e.getWidth()/2,o.getCenterY())}},t.exports=E},991(t,e,i){var o=i(551).FDLayoutNode,n=i(551).IMath;function r(t,e,i,n){o.call(this,t,e,i,n)}for(var a in r.prototype=Object.create(o.prototype),o)r[a]=o[a];r.prototype.calculateDisplacement=function(){var t=this.graphManager.getLayout();null!=this.getChild()&&this.fixedNodeWeight?(this.displacementX+=t.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=t.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=t.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=t.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>t.coolingFactor*t.maxNodeDisplacement&&(this.displacementX=t.coolingFactor*t.maxNodeDisplacement*n.sign(this.displacementX)),Math.abs(this.displacementY)>t.coolingFactor*t.maxNodeDisplacement&&(this.displacementY=t.coolingFactor*t.maxNodeDisplacement*n.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},r.prototype.propogateDisplacementToChildren=function(t,e){for(var i,o=this.getChild().getNodes(),n=0;n<o.length;n++)null==(i=o[n]).getChild()?(i.displacementX+=t,i.displacementY+=e):i.propogateDisplacementToChildren(t,e)},r.prototype.move=function(){var t=this.graphManager.getLayout();(null==this.child||0==this.child.getNodes().length)&&(this.moveBy(this.displacementX,this.displacementY),t.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},r.prototype.setPred1=function(t){this.pred1=t},r.prototype.getPred1=function(){return pred1},r.prototype.getPred2=function(){return pred2},r.prototype.setNext=function(t){this.next=t},r.prototype.getNext=function(){return next},r.prototype.setProcessed=function(t){this.processed=t},r.prototype.isProcessed=function(){return processed},t.exports=r},902(t,e,i){function o(t){if(!Array.isArray(t))return Array.from(t);for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}var n=i(806),r=i(551).LinkedList,a=i(551).Matrix,s=i(551).SVD;function h(){}h.handleConstraints=function(t){var e={};e.fixedNodeConstraint=t.constraints.fixedNodeConstraint,e.alignmentConstraint=t.constraints.alignmentConstraint,e.relativePlacementConstraint=t.constraints.relativePlacementConstraint;for(var i=new Map,h=new Map,l=[],d=[],g=t.getAllNodes(),c=0,p=0;p<g.length;p++){var f=g[p];null==f.getChild()&&(h.set(f.id,c++),l.push(f.getCenterX()),d.push(f.getCenterY()),i.set(f.id,f))}e.relativePlacementConstraint&&e.relativePlacementConstraint.forEach(function(t){t.gap||0==t.gap||(t.left?t.gap=n.DEFAULT_EDGE_LENGTH+i.get(t.left).getWidth()/2+i.get(t.right).getWidth()/2:t.gap=n.DEFAULT_EDGE_LENGTH+i.get(t.top).getHeight()/2+i.get(t.bottom).getHeight()/2)});var u=function t(e){var i=0,o=0;return e.forEach(function(t){i+=l[h.get(t)],o+=d[h.get(t)]}),{x:i/e.size,y:o/e.size}},m=function t(e,i,n,a,s){var g=new Map;e.forEach(function(t,e){g.set(e,0)}),e.forEach(function(t,e){t.forEach(function(t){g.set(t.id,g.get(t.id)+1)})});var c=new Map,p=new Map,f=new r;for(g.forEach(function(t,e){0==t?(f.push(e),n||("horizontal"==i?c.set(e,h.has(e)?l[h.get(e)]:a.get(e)):c.set(e,h.has(e)?d[h.get(e)]:a.get(e)))):c.set(e,Number.NEGATIVE_INFINITY),n&&p.set(e,new Set([e]))}),n&&s.forEach(function(t){var e=[];if(t.forEach(function(t){n.has(t)&&e.push(t)}),e.length>0){var o=0;e.forEach(function(t){"horizontal"==i?(c.set(t,h.has(t)?l[h.get(t)]:a.get(t)),o+=c.get(t)):(c.set(t,h.has(t)?d[h.get(t)]:a.get(t)),o+=c.get(t))}),o/=e.length,t.forEach(function(t){n.has(t)||c.set(t,o)})}else{var r=0;t.forEach(function(t){"horizontal"==i?r+=h.has(t)?l[h.get(t)]:a.get(t):r+=h.has(t)?d[h.get(t)]:a.get(t)}),r/=t.length,t.forEach(function(t){c.set(t,r)})}});0!=f.length;)!function t(){var o=f.shift();e.get(o).forEach(function(t){if(c.get(t.id)<c.get(o)+t.gap){if(n&&n.has(t.id)){var e=void 0;if(e="horizontal"==i?h.has(t.id)?l[h.get(t.id)]:a.get(t.id):h.has(t.id)?d[h.get(t.id)]:a.get(t.id),c.set(t.id,e),e<c.get(o)+t.gap){var r=c.get(o)+t.gap-e;p.get(o).forEach(function(t){c.set(t,c.get(t)-r)})}}else c.set(t.id,c.get(o)+t.gap)}g.set(t.id,g.get(t.id)-1),0==g.get(t.id)&&f.push(t.id),n&&p.set(t.id,function t(e,i){var o=new Set(e),n=!0,r=!1,a=void 0;try{for(var s,h=i[Symbol.iterator]();!(n=(s=h.next()).done);n=!0){var l=s.value;o.add(l)}}catch(d){r=!0,a=d}finally{try{!n&&h.return&&h.return()}finally{if(r)throw a}}return o}(p.get(o),p.get(t.id)))})}();if(n){var u=new Set;e.forEach(function(t,e){0==t.length&&u.add(e)});var m=[];p.forEach(function(t,e){if(u.has(e)){var i=!1,r=!0,a=!1,s=void 0;try{for(var h,l=t[Symbol.iterator]();!(r=(h=l.next()).done);r=!0){var d=h.value;n.has(d)&&(i=!0)}}catch(g){a=!0,s=g}finally{try{!r&&l.return&&l.return()}finally{if(a)throw s}}if(!i){var c=!1,p=void 0;m.forEach(function(e,i){e.has([].concat(o(t))[0])&&(c=!0,p=i)}),c?t.forEach(function(t){m[p].add(t)}):m.push(new Set(t))}}}),m.forEach(function(t,e){var o=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,g=!0,p=!1,f=void 0;try{for(var u,m=t[Symbol.iterator]();!(g=(u=m.next()).done);g=!0){var v=u.value,$=void 0;$="horizontal"==i?h.has(v)?l[h.get(v)]:a.get(v):h.has(v)?d[h.get(v)]:a.get(v);var T=c.get(v);$<o&&(o=$),$>r&&(r=$),T<n&&(n=T),T>s&&(s=T)}}catch(N){p=!0,f=N}finally{try{!g&&m.return&&m.return()}finally{if(p)throw f}}var E=(o+r)/2-(n+s)/2,y=!0,C=!1,w=void 0;try{for(var A,M=t[Symbol.iterator]();!(y=(A=M.next()).done);y=!0){var I=A.value;c.set(I,c.get(I)+E)}}catch(L){C=!0,w=L}finally{try{!y&&M.return&&M.return()}finally{if(C)throw w}}})}return c},v=function t(e){var i=0,o=0,n=0,r=0;if(e.forEach(function(t){t.left?l[h.get(t.left)]-l[h.get(t.right)]>=0?i++:o++:d[h.get(t.top)]-d[h.get(t.bottom)]>=0?n++:r++}),i>o&&n>r)for(var a=0;a<h.size;a++)l[a]=-1*l[a],d[a]=-1*d[a];else if(i>o)for(var s=0;s<h.size;s++)l[s]=-1*l[s];else if(n>r)for(var g=0;g<h.size;g++)d[g]=-1*d[g]},$=function t(e){var i=[],o=new r,n=new Set,a=0;return e.forEach(function(t,r){if(!n.has(r)){i[a]=[];var s=r;for(o.push(s),n.add(s),i[a].push(s);0!=o.length;)s=o.shift(),e.get(s).forEach(function(t){n.has(t.id)||(o.push(t.id),n.add(t.id),i[a].push(t.id))});a++}}),i},T=function t(e){var i=new Map;return e.forEach(function(t,e){i.set(e,[])}),e.forEach(function(t,e){t.forEach(function(t){i.get(e).push(t),i.get(t.id).push({id:e,gap:t.gap,direction:t.direction})})}),i},N=function t(e){var i=new Map;return e.forEach(function(t,e){i.set(e,[])}),e.forEach(function(t,e){t.forEach(function(t){i.get(t.id).push({id:e,gap:t.gap,direction:t.direction})})}),i},E=[],y=[],C=!1,w=!1,A=new Set,M=new Map,I=new Map,L=[];if(e.fixedNodeConstraint&&e.fixedNodeConstraint.forEach(function(t){A.add(t.nodeId)}),e.relativePlacementConstraint&&(e.relativePlacementConstraint.forEach(function(t){t.left?(M.has(t.left)?M.get(t.left).push({id:t.right,gap:t.gap,direction:"horizontal"}):M.set(t.left,[{id:t.right,gap:t.gap,direction:"horizontal"}]),M.has(t.right)||M.set(t.right,[])):(M.has(t.top)?M.get(t.top).push({id:t.bottom,gap:t.gap,direction:"vertical"}):M.set(t.top,[{id:t.bottom,gap:t.gap,direction:"vertical"}]),M.has(t.bottom)||M.set(t.bottom,[]))}),I=T(M),L=$(I)),n.TRANSFORM_ON_CONSTRAINT_HANDLING){if(e.fixedNodeConstraint&&e.fixedNodeConstraint.length>1)e.fixedNodeConstraint.forEach(function(t,e){E[e]=[t.position.x,t.position.y],y[e]=[l[h.get(t.nodeId)],d[h.get(t.nodeId)]]}),C=!0;else if(e.alignmentConstraint)!function(){var t=0;if(e.alignmentConstraint.vertical){for(var i=e.alignmentConstraint.vertical,n=0;n<i.length;n++)!function e(n){var r=new Set;i[n].forEach(function(t){r.add(t)});var a=new Set([].concat(o(r)).filter(function(t){return A.has(t)})),s=void 0;s=a.size>0?l[h.get(a.values().next().value)]:u(r).x,i[n].forEach(function(e){E[t]=[s,d[h.get(e)]],y[t]=[l[h.get(e)],d[h.get(e)]],t++})}(n);C=!0}if(e.alignmentConstraint.horizontal){for(var r=e.alignmentConstraint.horizontal,a=0;a<r.length;a++)!function e(i){var n=new Set;r[i].forEach(function(t){n.add(t)});var a=new Set([].concat(o(n)).filter(function(t){return A.has(t)})),s=void 0;s=a.size>0?l[h.get(a.values().next().value)]:u(n).y,r[i].forEach(function(e){E[t]=[l[h.get(e)],s],y[t]=[l[h.get(e)],d[h.get(e)]],t++})}(a);C=!0}e.relativePlacementConstraint&&(w=!0)}();else if(e.relativePlacementConstraint){for(var _=0,F=0,R=0;R<L.length;R++)L[R].length>_&&(_=L[R].length,F=R);if(_<I.size/2)v(e.relativePlacementConstraint),C=!1,w=!1;else{var P=new Map,O=new Map,D=[];L[F].forEach(function(t){M.get(t).forEach(function(e){"horizontal"==e.direction?(P.has(t)?P.get(t).push(e):P.set(t,[e]),P.has(e.id)||P.set(e.id,[]),D.push({left:t,right:e.id})):(O.has(t)?O.get(t).push(e):O.set(t,[e]),O.has(e.id)||O.set(e.id,[]),D.push({top:t,bottom:e.id}))})}),v(D),w=!1;var H=m(P,"horizontal"),b=m(O,"vertical");L[F].forEach(function(t,e){y[e]=[l[h.get(t)],d[h.get(t)]],E[e]=[],H.has(t)?E[e][0]=H.get(t):E[e][0]=l[h.get(t)],b.has(t)?E[e][1]=b.get(t):E[e][1]=d[h.get(t)]}),C=!0}}if(C){for(var x=void 0,G=a.transpose(E),z=a.transpose(y),V=0;V<G.length;V++)G[V]=a.multGamma(G[V]),z[V]=a.multGamma(z[V]);var W=a.multMat(G,a.transpose(z)),Y=s.svd(W);x=a.multMat(Y.V,a.transpose(Y.U));for(var S=0;S<h.size;S++){var X=[l[S],d[S]],U=[x[0][0],x[1][0]],B=[x[0][1],x[1][1]];l[S]=a.dotProduct(X,U),d[S]=a.dotProduct(X,B)}w&&v(e.relativePlacementConstraint)}}if(n.ENFORCE_CONSTRAINTS){if(e.fixedNodeConstraint&&e.fixedNodeConstraint.length>0){var k={x:0,y:0};e.fixedNodeConstraint.forEach(function(t,e){var i,o,n={x:l[h.get(t.nodeId)],y:d[h.get(t.nodeId)]},r=(i=t.position,o=n,{x:i.x-o.x,y:i.y-o.y});k.x+=r.x,k.y+=r.y}),k.x/=e.fixedNodeConstraint.length,k.y/=e.fixedNodeConstraint.length,l.forEach(function(t,e){l[e]+=k.x}),d.forEach(function(t,e){d[e]+=k.y}),e.fixedNodeConstraint.forEach(function(t){l[h.get(t.nodeId)]=t.position.x,d[h.get(t.nodeId)]=t.position.y})}if(e.alignmentConstraint){if(e.alignmentConstraint.vertical)for(var Z=e.alignmentConstraint.vertical,j=0;j<Z.length;j++)!function t(e){var i=new Set;Z[e].forEach(function(t){i.add(t)});var n=new Set([].concat(o(i)).filter(function(t){return A.has(t)})),r=void 0;r=n.size>0?l[h.get(n.values().next().value)]:u(i).x,i.forEach(function(t){A.has(t)||(l[h.get(t)]=r)})}(j);if(e.alignmentConstraint.horizontal)for(var q=e.alignmentConstraint.horizontal,K=0;K<q.length;K++)!function t(e){var i=new Set;q[e].forEach(function(t){i.add(t)});var n=new Set([].concat(o(i)).filter(function(t){return A.has(t)})),r=void 0;r=n.size>0?d[h.get(n.values().next().value)]:u(i).y,i.forEach(function(t){A.has(t)||(d[h.get(t)]=r)})}(K)}e.relativePlacementConstraint&&function(){var t=new Map,i=new Map,o=new Map,n=new Map,r=new Map,a=new Map,s=new Set,g=new Set;if(A.forEach(function(t){s.add(t),g.add(t)}),e.alignmentConstraint){if(e.alignmentConstraint.vertical)for(var c=e.alignmentConstraint.vertical,p=function e(i){o.set("dummy"+i,[]),c[i].forEach(function(e){t.set(e,"dummy"+i),o.get("dummy"+i).push(e),A.has(e)&&s.add("dummy"+i)}),r.set("dummy"+i,l[h.get(c[i][0])])},f=0;f<c.length;f++)p(f);if(e.alignmentConstraint.horizontal)for(var u=e.alignmentConstraint.horizontal,v=function t(e){n.set("dummy"+e,[]),u[e].forEach(function(t){i.set(t,"dummy"+e),n.get("dummy"+e).push(t),A.has(t)&&g.add("dummy"+e)}),a.set("dummy"+e,d[h.get(u[e][0])])},E=0;E<u.length;E++)v(E)}var y=new Map,C=new Map,w=function e(o){M.get(o).forEach(function(e){var n=void 0,r=void 0;"horizontal"==e.direction?(n=t.get(o)?t.get(o):o,r=t.get(e.id)?{id:t.get(e.id),gap:e.gap,direction:e.direction}:e,y.has(n)?y.get(n).push(r):y.set(n,[r]),y.has(r.id)||y.set(r.id,[])):(n=i.get(o)?i.get(o):o,r=i.get(e.id)?{id:i.get(e.id),gap:e.gap,direction:e.direction}:e,C.has(n)?C.get(n).push(r):C.set(n,[r]),C.has(r.id)||C.set(r.id,[]))})},I=!0,L=!1,_=void 0;try{for(var F,R=M.keys()[Symbol.iterator]();!(I=(F=R.next()).done);I=!0){var P=F.value;w(P)}}catch(O){L=!0,_=O}finally{try{!I&&R.return&&R.return()}finally{if(L)throw _}}var D=T(y),H=T(C),b=$(D),x=$(H),G=N(y),z=N(C),V=[],W=[];b.forEach(function(t,e){V[e]=[],t.forEach(function(t){0==G.get(t).length&&V[e].push(t)})}),x.forEach(function(t,e){W[e]=[],t.forEach(function(t){0==z.get(t).length&&W[e].push(t)})});var Y=m(y,"horizontal",s,r,V),S=m(C,"vertical",g,a,W),X=function t(e){o.get(e)?o.get(e).forEach(function(t){l[h.get(t)]=Y.get(e)}):l[h.get(e)]=Y.get(e)},U=!0,B=!1,k=void 0;try{for(var Z,j=Y.keys()[Symbol.iterator]();!(U=(Z=j.next()).done);U=!0){var q=Z.value;X(q)}}catch(K){B=!0,k=K}finally{try{!U&&j.return&&j.return()}finally{if(B)throw k}}var Q=function t(e){n.get(e)?n.get(e).forEach(function(t){d[h.get(t)]=S.get(e)}):d[h.get(e)]=S.get(e)},J=!0,tt=!1,te=void 0;try{for(var ti,to=S.keys()[Symbol.iterator]();!(J=(ti=to.next()).done);J=!0){var q=ti.value;Q(q)}}catch(tn){tt=!0,te=tn}finally{try{!J&&to.return&&to.return()}finally{if(tt)throw te}}}()}for(var Q=0;Q<g.length;Q++){var J=g[Q];null==J.getChild()&&J.setCenter(l[h.get(J.id)],d[h.get(J.id)])}},t.exports=h},551(e){e.exports=t}},i={},function t(o){var n=i[o];if(void 0!==n)return n.exports;var r=i[o]={exports:{}};return e[o](r,r.exports,t),r.exports}(45)});