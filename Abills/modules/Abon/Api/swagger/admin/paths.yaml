/abon/tariffs:
  get:
    tags:
      - abon
    summary: Получить список ТП
    description: Возвращает список ТП
    operationId: getAbonTps
    parameters:
      - name: activateNotification
        in: query
        description: Оповещать о продлении услуги
        schema:
          type: boolean
          default: true
      - name: createAccount
        in: query
        description: Создать счет
        schema:
          type: boolean
          default: true
      - name: description
        in: query
        description: Описание
        schema:
          type: boolean
          default: true
      - name: extCmd
        in: query
        description: Внешняя команда
        schema:
          type: boolean
          default: true
      - name: feesType
        in: query
        description: Тип списания
        schema:
          type: boolean
          default: true
      - name: manualActivate
        in: query
        description: Ручное включение услуги
        schema:
          type: boolean
          default: true
      - name: nextAbonDate
        in: query
        description: Дата следующего списания
        schema:
          type: boolean
          default: true
      - name: paymentType
        in: query
        description: Тип оплаты
        schema:
          type: boolean
          default: true
      - name: period
        in: query
        description: Период
        schema:
          type: boolean
          default: true
      - name: periodAlignment
        in: query
        description: Выравнивание месяца
        schema:
          type: boolean
          default: true
      - name: price
        in: query
        description: Цена
        schema:
          type: boolean
          default: true
      - name: priority
        in: query
        description: Приоритет
        schema:
          type: boolean
          default: true
      - name: promoPeriod
        in: query
        description: Промо период
        schema:
          type: boolean
          default: true
      - name: tpId
        in: query
        description: Id тарифного плана
        schema:
          type: boolean
          default: true
      - name: tpName
        in: query
        description: Название тарифного плана
        schema:
          type: boolean
          default: true
      - name: userCount
        in: query
        description: Количество пользователей
        schema:
          type: boolean
          default: true
      - name: userPortal
        in: query
        description: Активация только с пользовательского портала
        schema:
          type: boolean
          default: true
      - name: vat
        in: query
        description: НДС
        schema:
          type: boolean
          default: true
      - name: plugin
        in: query
        description: Плагин
        schema:
          type: boolean
          default: false
      - name: activatePrice
        in: query
        description: Цена активации
        schema:
          type: boolean
          default: false
      - name: pageRows
        in: query
        description: Количество записей
        schema:
          type: integer
          default: 25
      - name: sort
        in: query
        description: Сортировка по одному параметру выше
        schema:
          type: string
      - name: pg
        in: query
        description: Работает вместе с pageRows, параметр отвечает с какой записи начинать возвращать в запросе
        schema:
          type: integer
          default: 0
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AbonTpsArray"
    security:
      - KEY: []
  post:
    tags:
      - abon
    summary: Добавление ТП
    operationId: addAbonTp
    requestBody:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/AbonAddTp"
      required: true
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ApiSuccessAddResponse"
      400:
        description: Тарифный план уже существует
        content:
          application/json:
            schema:
              type: object
              properties:
                errno:
                  type: integer
                  example: 7
                errstr:
                  type: string
                  example: "ERROR_DUPLICATE"
    security:
      - KEY: []
/abon/tariffs/{ID}:
  get:
    tags:
      - abon
    summary: Получить информацию о ТП
    description: Возвращает информацию о ТП
    operationId: getAbonTp
    parameters:
      - name: ID
        in: path
        description: Идентификатор тарифного плана
        required: true
        schema:
          type: integer
          format: int64
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AbonTp"
    security:
      - KEY: []
/abon/tariffs/{ID}/users/{UID}:
  post:
    tags:
      - abon
    summary: Добавление ТП пользователю
    operationId: addAbonTpToUser
    parameters:
      - name: ID
        in: path
        description: ID ТП
        required: true
        schema:
          type: integer
          format: int64
      - name: UID
        in: path
        description: UID пользователя
        required: true
        schema:
          type: integer
          format: int64
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: object
              properties:
                account:
                  type: number
                  example: 0
                activateNotification:
                  type: number
                  example: 0
                activatePrice:
                  type: number
                  example: 0
                affected:
                  type: number
                  example: 0
                alert:
                  type: number
                  example: 0
                alertAccount:
                  type: number
                  example: 0
                categoryId:
                  type: number
                  example: 0
      400:
        description: Тарифный план уже активирован
        content:
          application/json:
            schema:
              type: object
              properties:
                errno:
                  type: integer
                  example: 20004
                errstr:
                  type: string
                  example: "ERR_TARIFF_ALREADY_ACTIVATED"
    security:
      - KEY: []
  delete:
    tags:
      - abon
    summary: Удаление ТП пользователя
    description: Удаление ТП пользователя
    operationId: getUserAbonTps
    parameters:
      - name: ID
        in: path
        description: Идентификатор тарифного плана
        required: true
        schema:
          type: integer
          format: int64
      - name: UID
        in: path
        description: UID пользователя
        required: true
        schema:
          type: integer
          format: int64
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  type: string
                  example: Successfully deleted
      400:
        description: Тарифный план уже деактивирован
        content:
          application/json:
            schema:
              type: object
              properties:
                errno:
                  type: integer
                  example: 20006
                errstr:
                  type: string
                  example: "ERR_TARIFF_ALREADY_DEACTIVATED"
    security:
      - KEY: []
/abon/users:
  get:
    tags:
      - abon
    summary: Получить список пользователей Abon
    description: Возвращает список пользователей Abon
    operationId: getUsersAbon
    parameters:
      - name: uid
        in: query
        description: Идентификатор пользователя
        schema:
          type: boolean
          default: true
      - name: comments
        in: query
        description: Комментарии
        schema:
          type: boolean
          default: false
      - name: date
        in: query
        description: Дата активации
        schema:
          type: boolean
          default: false
      - name: feesPeriod
        in: query
        description: Количество списаний
        schema:
          type: boolean
          default: false
      - name: manualFee
        in: query
        description: Ручное списание
        schema:
          type: boolean
          default: false
      - name: tpName
        in: query
        description: Название ТП
        schema:
          type: boolean
          default: false
      - name: tpId
        in: query
        description: Идентификатор ТП
        schema:
          type: boolean
          default: false
      - name: nextAbon
        in: query
        description: Следующая абонплата
        schema:
          type: boolean
          default: false
      - name: price
        in: query
        description: Цена
        schema:
          type: boolean
          default: false
      - name: period
        in: query
        description: Период
        schema:
          type: boolean
          default: false
      - name: serviceCount
        in: query
        description: Количество услуг
        schema:
          type: boolean
          default: false
      - name: pageRows
        in: query
        description: Количество записей
        schema:
          type: integer
          default: 25
      - name: sort
        in: query
        description: Сортировка по одному параметру выше
        schema:
          type: string
      - name: pg
        in: query
        description: Работает вместе с pageRows, параметр отвечает с какой записи начинать возвращать в запросе
        schema:
          type: integer
          default: 0
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AbonUsersArray"
    security:
      - KEY: []