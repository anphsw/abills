/voip/users:
  get:
    tags:
      - voip
    summary: Список пользователей с услугой Voip
    parameters:
      - name: id
        in: query
        description: ID услуги Voip
        schema:
          type: boolean
          default: true
      - name: tpId
        in: query
        description: ID тарифного плана.
        schema:
          type: boolean
          default: true
      - name: uid
        in: query
        description: UID пользователя.
        schema:
          type: boolean
          default: true
      - name: number
        in: query
        description: Номер телефона пользователя.
        schema:
          type: boolean
          default: false
      - name: tpName
        in: query
        description: Название тарифного плана.
        schema:
          type: boolean
          default: false
      - name: ip
        in: query
        description: IP пользователя в услуге Voip.
        schema:
          type: boolean
          default: false
      - name: cid
        in: query
        description: MAC адрес пользователя в услуге Voip.
        schema:
          type: boolean
          default: false
      - name: serviceStatus
        in: query
        description: Статус услуги Voip.
        schema:
          type: boolean
          default: false
      - name: filterId
        in: query
        description: ID фильтра.
        schema:
          type: boolean
          default: false
      - name: simultaneously
        in: query
        description: Количество пользователей, которые могут подключиться под одним логином в один промежуток времени.
        schema:
          type: boolean
          default: false
      - name: tpCredit
        in: query
        description: Кредитный лимит тарифного плана.
        schema:
          type: boolean
          default: false
      - name: voipExpire
        in: query
        description: Дата окончания услуги.
        schema:
          type: boolean
          default: false
      - name: provisionNasId
        in: query
        description: ID сервера доступа.
        schema:
          type: boolean
          default: false
      - name: provisionPort
        in: query
        description: Порт.
        schema:
          type: boolean
          default: false
      - name: monthFee
        in: query
        description: Месячная оплата за услугу.
        schema:
          type: boolean
          default: false
      - name: dayFee
        in: query
        description: Ежедневная оплата за услугу.
        schema:
          type: boolean
          default: false
      - name: extraNumber
        in: query
        description: Дополнительный номер пользователя.
        schema:
          type: boolean
          default: false
      - name: extraNumbersDayFee
        in: query
        description: Ежедневная оплата за дополнительный номер.
        schema:
          type: boolean
          default: false
      - name: extraNumbersMonthFee
        in: query
        description: Месячная оплата за дополнительный номер.
        schema:
          type: boolean
          default: false
      - name: pageRows
        in: query
        description: Количество записей
        schema:
          type: integer
          default: 25
      - name: sort
        in: query
        description: Сортировка по одному параметру выше
        schema:
          type: string
      - name: pg
        in: query
        description: Работает вместе с pageRows, параметр отвечает с какой записи начинать возвращать в запросе
        schema:
          type: integer
          default: 0
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/VoipUserList"
            examples:
              DefaultProperties:
                summary:
                  Ответ по умолчанию
                value:
                  id: 42
                  tpId: 39
                  uid: 103161
              AllProperties:
                summary:
                  Все возможные поля в ответе
                value:
                  allowAnswer: 0
                  allowCalls: 0
                  cid: '10:fe:ed:43:8f:35'
                  dayAbon: 10
                  disable: 0
                  expire: '0000-00-00'
                  extraNumbersDayFee: 1
                  extraNumbersMonthFee: 5
                  filterId: 1
                  id: 42
                  ip: 0.0.0.0
                  logins: 0
                  monthAbon: 100
                  nat: 1
                  number: 380509152720
                  provisionNasId: 0
                  provisionPort: 0
                  registration: '0000-00-00'
                  simultaneously: 0
                  tpCredit: 0
                  tpId: 39
                  tpName: test api change
                  tpNum: 23131
                  uid: 103161
                  voipExpire: '0000-00-00'
    security:
      - KEY: []
/voip/{UID}:
  get:
    tags:
      - voip
    summary: Информация о услуге Voip пользователя
    parameters:
      - name: UID
        in: path
        description: UID пользователя в биллинге
        required: true
        schema:
          type: integer
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VoipUserInfo"
    security:
      - KEY: []
  post:
    tags:
      - voip
    summary: Добавить услугу Voip пользователю
    parameters:
      - name: UID
        in: path
        description: UID пользователя в биллинге
        required: true
        schema:
          type: integer
    requestBody:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/VoipAddUser"
      required: true
    responses:
      200:
        description: Успешно добавлена услуга пользователю
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  type: string
                  example: OK
      400:
        description: Невозможно добавить ещё услугу Voip пользователю
        content:
          application/json:
            schema:
              type: object
              properties:
                errno:
                  type: integer
                  example: 31027
                errstr:
                  type: string
                  example: Failed add user already has voip service
    security:
      - KEY: []
  put:
    tags:
      - voip
    summary: Изменить услугу Voip пользователю
    parameters:
      - name: UID
        in: path
        description: UID пользователя в биллинге
        required: true
        schema:
          type: integer
    requestBody:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/VoipAddUser"
      required: true
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  type: string
                  example: OK, successfully changed tp info for user with uid 103161
      400:
        description: Ошибка изменения данных
        content:
          application/json:
            schema:
              type: object
              properties:
                errno:
                  type: integer
                  example: 31019
                errstr:
                  type: string
                  example: Voip error
    security:
      - KEY: []
  delete:
    tags:
      - voip
    summary: Удалить пользователя Voip
    parameters:
      - name: UID
        in: path
        description: UID пользователя в биллинге
        required: true
        schema:
          type: integer
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  type: string
                  example: Successfully deleted
      400:
        description: Нет пользователя Voip
        content:
          application/json:
            schema:
              type: object
              properties:
                errno:
                  type: integer
                  example: 31015
                errstr:
                  type: string
                  example: "User doesn't have a voip service"
    security:
      - KEY: []
/voip/{UID}/tariff:
  put:
    tags:
      - voip
    summary: Изменить Voip тариф пользователю
    parameters:
      - name: UID
        in: path
        description: UID пользователя в биллинге
        required: true
        schema:
          type: integer
    requestBody:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/VoipUserChangeTp"
      required: true
    responses:
      200:
        description: Нет направления
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  type: string
                  example: OK, successfully changed tp info for user with uid 103161
      400:
        description: Услуга уже есть у пользователя
        content:
          application/json:
            schema:
              type: object
              properties:
                errno:
                  type: integer
                  example: 31019
                errstr:
                  type: string
                  example: Same tpId which already active
    security:
      - KEY: []
  delete:
    tags:
      - voip
    summary: Удалить расписания изменение тарифа пользователя Voip
    parameters:
      - name: UID
        in: path
        description: UID пользователя в биллинге
        required: true
        schema:
          type: integer
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  type: string
                  example: Ok successfully deleted schedule id 799 for user with uid 7275
      400:
        description: Нет расписания на изменения тарифа пользователя Voip
        content:
          application/json:
            schema:
              type: object
              properties:
                errno:
                  type: integer
                  example: 30023
                errstr:
                  type: string
                  example: "No tp change schedule for user with uid 103161"
    security:
      - KEY: []
/voip/phone/aliases:
  get:
    tags:
      - voip
    summary: Дополнительные номера пользователей
    parameters:
      - name: changed
        in: query
        description: Последняя дата изменения номера.
        schema:
          type: boolean
          default: true
      - name: disable
        in: query
        description: Статус дополнительного номера пользователя.
        schema:
          type: boolean
          default: true
      - name: id
        in: query
        description: ID дополнительного номера пользователя.
        schema:
          type: boolean
          default: true
      - name: number
        in: query
        description: Дополнительный номер пользователя.
        schema:
          type: boolean
          default: true
      - name: uid
        in: query
        description: UID пользователя в биллинге.
        schema:
          type: boolean
          default: true
      - name: pageRows
        in: query
        description: Количество записей
        schema:
          type: integer
          default: 25
      - name: pg
        in: query
        description: Работает вместе с pageRows, параметр отвечает с какой записи начинать возвращать в запросе
        schema:
          type: integer
          default: 0
      - name: sort
        in: query
        description: Сортировка по одному параметру выше
        schema:
          type: string
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/VoipPhoneAliase"
    security:
      - KEY: []
/voip/{UID}/phone/aliases:
  get:
    tags:
      - voip
    summary: Информация о дополнительных номерах
    parameters:
      - name: UID
        in: path
        description: UID пользователя в биллинге
        required: true
        schema:
          type: integer
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/VoipPhoneAliase"
    security:
      - KEY: []
  post:
    tags:
      - voip
    summary: Добавить номер
    parameters:
      - name: UID
        in: path
        description: UID пользователя в биллинге
        required: true
        schema:
          type: integer
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              number:
                type: number
                example: 05032321312
      required: true
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  type: string
                  example: "Added phone alias 05032321312 for uid 123321"
      400:
        description: Невозможно добавить номер, он уже привязан
        content:
          application/json:
            schema:
              type: object
              properties:
                errno:
                  type: integer
                  example: 30026
                errstr:
                  type: string
                  example: "Phone alias 05032321312 already has user with uid 123321"
    security:
      - KEY: []
/voip/{UID}/phone/alias/{ID}:
  delete:
    tags:
      - voip
    summary: Удалить привязанный номер
    parameters:
      - name: UID
        in: path
        description: UID пользователя в биллинге
        required: true
        schema:
          type: integer
      - name: ID
        in: path
        description: ID номера
        required: true
        schema:
          type: integer
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  type: string
                  example: Successfully deleted
      400:
        description: Нет расписания на изменения тарифа пользователя Voip
        content:
          application/json:
            schema:
              type: object
              properties:
                errno:
                  type: integer
                  example: 30023
                errstr:
                  type: string
                  example: "Phone alias with id 123 and user with uid 12321 not exist"
    security:
      - KEY: []
/voip/tariffs:
  get:
    tags:
      - voip
    summary: Список тарифов Voip
    parameters:
      - name: age
        in: query
        description: Срок действия с момента активации (Дни).
        schema:
          type: boolean
          default: true
      - name: dayFee
        in: query
        description: Сумма дневной абонентской платы.
        schema:
          type: boolean
          default: true
      - name: id
        in: query
        description: Внешний ID тарифного плана.
        schema:
          type: boolean
          default: true
      - name: logins
        in: query
        description: Одновременное количество пользователей.
        schema:
          type: boolean
          default: true
      - name: monthFee
        in: query
        description: Сумма месячной абонентской платы.
        schema:
          type: boolean
          default: true
      - name: name
        in: query
        description: Название тарифного плана
        schema:
          type: boolean
          default: true
      - name: paymentType
        in: query
        description: >
          Тип оплаты за услугу
           * `0` - Предоплата
           * `1` - Послеоплата
        schema:
          type: boolean
          default: true
      - name: timeTarifs
        in: query
        description: Часовой тариф
        schema:
          type: boolean
          default: true
      - name: tpId
        in: query
        description: Внутренний ID тарифного плана.
        schema:
          type: boolean
          default: true
      - name: freeTime
        in: query
        description: Беслатное время звонка.
        schema:
          type: boolean
          default: false
      - name: timeDivision
        in: query
        description: Интервал тарификации (сек).
        schema:
          type: boolean
          default: false
      - name: pageRows
        in: query
        description: Количество записей
        schema:
          type: integer
          default: 25
      - name: sort
        in: query
        description: Сортировка по одному параметру выше
        schema:
          type: string
      - name: pg
        in: query
        description: Работает вместе с pageRows, параметр отвечает с какой записи начинать возвращать в запросе
        schema:
          type: integer
          default: 0
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/VoipTpListInfo"
    security:
      - KEY: []
/voip/tariff:
  post:
    tags:
      - voip
    summary: Добавить тарифный план Voip
    requestBody:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/VoipTpAddRequest"
      required: true
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InsertTpResponse200"
      400:
        description: Дубликат
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InsertTpResponse400"
    security:
      - KEY: []
/voip/tariff/{tpId}:
  get:
    tags:
      - voip
    summary: Информация о тарифе Voip
    parameters:
      - name: tpId
        in: path
        description: tpId Voip тарифа
        required: true
        schema:
          type: integer
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VoipTpInfo"
    security:
      - KEY: []
  put:
    tags:
      - voip
    summary: Изменить тариф Voip
    parameters:
      - name: tpId
        in: path
        description: TP_ID Voip тарифа
        required: true
        schema:
          type: integer
    requestBody:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/VoipTpAddRequest"
      required: true
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChangeResponse200"
    security:
      - KEY: []
  delete:
    tags:
      - voip
    summary: Удалить тариф Voip
    parameters:
      - name: tpId
        in: path
        description: tpId Voip тарифа
        required: true
        schema:
          type: integer
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  type: string
                  example: Successfully deleted
      400:
        description: Нет тарифа
        content:
          application/json:
            schema:
              type: object
              properties:
                errno:
                  type: integer
                  example: 30004
                errstr:
                  type: string
                  example: tpId 8 not exists
    security:
      - KEY: []
/voip/trunk/protocols:
  get:
    tags:
      - voip
    summary: Список доступных протоколов
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: array
              items:
                type: string
                example: SIP
    security:
      - KEY: []
/voip/trunks:
  get:
    tags:
      - voip
    summary: Список транков
    parameters:
      - name: failoverTrunk
        in: query
        description: Резервный транк при сбое.
        schema:
          type: boolean
          default: true
      - name: id
        in: query
        description: ID транка.
        schema:
          type: boolean
          default: true
      - name: name
        in: query
        description: Название транка.
        schema:
          type: boolean
          default: true
      - name: protocol
        in: query
        description: Протокол транка.
        schema:
          type: boolean
          default: true
      - name: providerName
        in: query
        description: Поставщик услуг Voip
        schema:
          type: boolean
          default: true
      - name: pageRows
        in: query
        description: Количество записей
        schema:
          type: integer
          default: 25
      - name: sort
        in: query
        description: Сортировка по одному параметру выше
        schema:
          type: string
      - name: pg
        in: query
        description: Работает вместе с pageRows, параметр отвечает с какой записи начинать возвращать в запросе
        schema:
          type: integer
          default: 0
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/VoipTrunk"
    security:
      - KEY: []
  post:
    tags:
      - voip
    summary: Добавить транк
    requestBody:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/TrunkAddRequest"
      required: true
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InsertResponse200"
      400:
        description: Дубликат
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InsertResponse400"
    security:
      - KEY: []
/voip/trunk/{ID}:
  get:
    tags:
      - voip
    summary: Информация о транке
    parameters:
      - name: ID
        in: path
        description: ID транка
        required: true
        schema:
          type: integer
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  type: string
                  example: Successfully deleted
    security:
      - KEY: []
  put:
    tags:
      - voip
    summary: Изменить транк
    parameters:
      - name: ID
        in: path
        description: ID транка
        required: true
        schema:
          type: integer
    requestBody:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/TrunkAddRequest"
      required: true
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChangeResponse200"
      400:
        description: Дубликат
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InsertResponse400"
    security:
      - KEY: []
  delete:
    tags:
      - voip
    summary: Удалить транк
    parameters:
      - name: ID
        in: path
        description: ID транка
        required: true
        schema:
          type: integer
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  type: string
                  example: Successfully deleted
      400:
        description: Нет транка
        content:
          application/json:
            schema:
              type: object
              properties:
                errno:
                  type: integer
                  example: 30010
                errstr:
                  type: string
                  example: trunkId 8 not exists
    security:
      - KEY: []
/voip/extra/tarifications:
  get:
    tags:
      - voip
    summary: Список дополнительных тарификаций
    parameters:
      - name: id
        in: query
        description: ID тарификации.
        schema:
          type: boolean
          default: true
      - name: name
        in: query
        description: Название тарификации.
        schema:
          type: boolean
          default: true
      - name: prepaidTime
        in: query
        description: Время предплаты
        schema:
          type: boolean
          default: true
      - name: pageRows
        in: query
        description: Количество записей
        schema:
          type: integer
          default: 25
      - name: sort
        in: query
        description: Сортировка по одному параметру выше
        schema:
          type: string
      - name: pg
        in: query
        description: Работает вместе с pageRows, параметр отвечает с какой записи начинать возвращать в запросе
        schema:
          type: integer
          default: 0
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/ExtraTarificationInfo"
    security:
      - KEY: []
/voip/extra/tarification:
  post:
    tags:
      - voip
    summary: Добавить тарификацию
    requestBody:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ExtraTarificationAddRequest"
      required: true
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InsertResponse200"
      400:
        description: Дубликат
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InsertResponse400"
    security:
      - KEY: []
/voip/extra/tarification/{ID}:
  get:
    tags:
      - voip
    summary: Информация тарификации
    parameters:
      - name: ID
        in: path
        description: ID тарификации
        required: true
        schema:
          type: integer
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  type: string
                  example: Successfully changed 10
    security:
      - KEY: []
  put:
    tags:
      - voip
    summary: Изменить тарификацию
    parameters:
      - name: ID
        in: path
        description: ID тарификации
        required: true
        schema:
          type: integer
    requestBody:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ExtraTarificationAddRequest"
      required: true
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  type: string
                  example: Successfully changed 10
      400:
        description: Дубликат
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InsertResponse400"
    security:
      - KEY: []
  delete:
    tags:
      - voip
    summary: Удалить тарификацию
    parameters:
      - name: ID
        in: path
        description: ID тарификации
        required: true
        schema:
          type: integer
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  type: string
                  example: Successfully deleted
      400:
        description: Нет тарификации
        content:
          application/json:
            schema:
              type: object
              properties:
                errno:
                  type: integer
                  example: 30015
                errstr:
                  type: string
                  example: tarificationId 8 not exists
    security:
      - KEY: []
/voip/routes:
  get:
    tags:
      - voip
    summary: Направления звонков
    parameters:
      - name: date
        in: query
        description: Дата добавления направления.
        schema:
          type: boolean
          default: true
      - name: descr
        in: query
        description: Описание направления.
        schema:
          type: boolean
          default: true
      - name: disable
        in: query
        description: Статус направления.
        schema:
          type: boolean
          default: true
      - name: id
        in: query
        description: ID направления.
        schema:
          type: boolean
          default: true
      - name: name
        in: query
        description: Название направления.
        schema:
          type: boolean
          default: true
      - name: parent
        in: query
        description: ID родительского пути куда привязан, зарезервировано и не используется.
        schema:
          type: boolean
          default: true
      - name: prefix
        in: query
        description: Префикс направления.
        schema:
          type: boolean
          default: true
      - name: pageRows
        in: query
        description: Количество записей
        schema:
          type: integer
          default: 25
      - name: sort
        in: query
        description: Сортировка по одному параметру выше
        schema:
          type: string
      - name: pg
        in: query
        description: Работает вместе с pageRows, параметр отвечает с какой записи начинать возвращать в запросе
        schema:
          type: integer
          default: 0
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/RouteInfo"
    security:
      - KEY: []
/voip/route:
  post:
    tags:
      - voip
    summary: Добавить направление
    requestBody:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/RouteAddRequest"
      required: true
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InsertResponse200"
      400:
        description: Дубликат
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InsertResponse400"
    security:
      - KEY: []
/voip/route/{ID}:
  get:
    tags:
      - voip
    summary: Информация о напрвлении
    parameters:
      - name: ID
        in: path
        description: ID напрявления
        required: true
        schema:
          type: integer
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RouteInfo"
    security:
      - KEY: []
  put:
    tags:
      - voip
    summary: Изменить направление
    parameters:
      - name: ID
        in: path
        description: ID напрвления
        required: true
        schema:
          type: integer
    requestBody:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/RouteAddRequest"
      required: true
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChangeResponse200"
      400:
        description: Дубликат
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RouteChangeResponse400"
    security:
      - KEY: []
  delete:
    tags:
      - voip
    summary: Удалить напрявление
    parameters:
      - name: ID
        in: path
        description: ID напрвления
        required: true
        schema:
          type: integer
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  type: string
                  example: Successfully deleted
      400:
        description: Нет направления
        content:
          application/json:
            schema:
              type: object
              properties:
                errno:
                  type: integer
                  example: 30006
                errstr:
                  type: string
                  example: routeId 8 not exists
    security:
      - KEY: []
/voip/sessions:
  get:
    tags:
      - voip
    summary: Список сессий пользователей
    parameters:
      - name: acctSessionId
        in: query
        description: ID сессии. Уникально на сервере доступа.
        schema:
          type: boolean
          default: true
      - name: callOrigin
        in: query
        description: >
          Входящий или исходящий вызов
           * `0` - Входящий
           * `1` - Исходящий
        schema:
          type: boolean
          default: true
      - name: nasId
        in: query
        description: ID сервера доступа.
        schema:
          type: boolean
          default: true
      - name: routeId
        in: query
        description: Идентификатор пути. Можно получить подробную информацию о пути из /voip/routes.
        schema:
          type: boolean
          default: true
      - name: uid
        in: query
        description: UID пользователя.
        schema:
          type: boolean
          default: true
      - name: start
        in: query
        description: Время звонка.
        schema:
          type: boolean
          default: false
      - name: duration
        in: query
        description: Длительность звонка.
        schema:
          type: boolean
          default: false
      - name: durationSec
        in: query
        description: Длительность звонка в секундах
        schema:
          type: boolean
          default: false
      - name: ip
        in: query
        description: IP клиента, с которого произошел звонок
        schema:
          type: boolean
          default: false
      - name: calledStationId
        in: query
        description: Номер телефона адресата вызова
        schema:
          type: boolean
          default: false
      - name: callingStationId
        in: query
        description: Номер телефона получателя вызова
        schema:
          type: boolean
          default: false
      - name: terminateCause
        in: query
        description: Причина остановки звонка
        schema:
          type: boolean
          default: false
      - name: tpId
        in: query
        description: Тарифный план, по которому тарифицируется звонок
        schema:
          type: boolean
          default: false
      - name: sum
        in: query
        description: Стоимость звонка для пользователя
        schema:
          type: boolean
          default: false
      - name: fromDate
        in: query
        description: Звонок сделан с даты
        schema:
          type: string
          default: false
      - name: toDate
        in: query
        description: Звонок сделан до даты
        schema:
          type: string
          default: false
      - name: dayBegin
        in: query
        description: Время звонка в формате TIMESTAMP. Информационное поле, невозможен поиск по нему
        schema:
          type: string
          default: true
      - name: dayOfWeek
        in: query
        description: День недели когда сделан звонок. Информационное поле, невозможен поиск по нему
        schema:
          type: string
          default: true
      - name: dayOfYear
        in: query
        description: День года когда сделан звонок. Информационное поле, невозможен поиск по нему
        schema:
          type: string
          default: true
      - name: pageRows
        in: query
        description: Количество записей
        schema:
          type: integer
          default: 25
      - name: sort
        in: query
        description: Сортировка по одному параметру выше
        schema:
          type: string
      - name: pg
        in: query
        description: Работает вместе с pageRows, параметр отвечает с какой записи начинать возвращать в запросе
        schema:
          type: integer
          default: 0
    responses:
      200:
        description: Успешное выполнение
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/VoipSessions"
            examples:
              DefaultProperties:
                summary:
                  Ответ по умолчанию
                value:
                  acctSessionId: 1
                  callOrigin: 0
                  dayBegin: 1669845600
                  dayOfWeek: 5
                  dayOfYear: 335
                  nasId: 0
                  routeId: 967
                  uid: 102167
              AllProperties:
                summary:
                  Все возможные поля в ответе
                value:
                  acctSessionId: 1
                  callOrigin: 0
                  calledStationId: 380506712612
                  callingStationId: 380506712612
                  dayBegin: 1669845600
                  dayOfWeek: 5
                  dayOfYear: 335
                  duration: 00:05:03
                  durationSec: 303
                  ip: '0.0.0.0'
                  nasId: 0
                  routeId: 967
                  start: '2022-12-01 11:11:11'
                  sum: 6060
                  terminateCause: 0
                  tpId: 39
                  uid: 102167
    security:
      - KEY: []
